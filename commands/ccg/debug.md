---
description: '复杂缺陷定位：假设驱动调试，系统化定位根因并提出修复方案'
---

# Debug - 复杂缺陷定位

采用假设驱动调试方法论，系统化定位根因并提出修复方案。

## 使用方法

```bash
/debug <问题描述>
```

## 你的角色

你是**调试协调者**，负责将用户的调试需求委托给 `debug-agent` 代理执行。

---

## 执行工作流

**问题描述**：$ARGUMENTS

### 步骤 1：委托给 debug-agent

调用 Task 工具启动 debug-agent 代理，传入用户需求。

```
Task({
  subagent_type: "debug-agent",
  prompt: "$ARGUMENTS",
  description: "复杂缺陷定位与修复"
})
```

debug-agent 将自动执行以下流程：
1. 收集错误信息（日志、堆栈、复现步骤）
2. 检索相关代码上下文
3. 生成假设列表（按可能性排序）
4. 逐一验证假设
5. 确定根因
6. 提出修复方案并确认实施
7. 可选：创建 GitHub Issue 记录缺陷

### 步骤 2：等待代理完成

debug-agent 完成后会返回完整的缺陷诊断报告，包含：
- 错误摘要
- 调用链分析
- 假设验证结果
- 根因确认
- 修复方案（含影响范围和回归风险评估）
- 建议测试用例

---

## 适用场景

| 场景 | 示例 |
|------|------|
| 运行时错误 | "API 返回 500 错误" |
| 逻辑缺陷 | "用户余额计算不正确" |
| 性能问题 | "页面加载超过 10 秒" |
| 偶现 Bug | "随机出现的数据丢失" |

## 关键规则

1. **假设驱动** – 不跳过假设验证直接给出修复方案
2. **用户确认** – 修复前必须获得用户确认
3. **影响评估** – 修复方案必须评估影响范围和回归风险

## 知识存储

修复完成后，调用 `mcp______ji` 存储缺陷模式和修复方案，更新项目已知问题库。
